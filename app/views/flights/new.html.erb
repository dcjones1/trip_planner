<br>
<h2 style="margin-left: 15px">Flight Options</h2><br>
<%= form_tag flights_path do %>
<div class="container-fluid">
 <table class="table table-hover table-striped table-bordered">
 <thead class="thead-light">
   <tr>
     <td class="text-center"><strong>Option</strong></td>
     <td class="text-center"><strong>Origin</strong></td>
     <td class="text-center"><strong>Destination</strong></td>
     <td class="text-center"><strong>Departure Date</strong></td>
     <td class="text-center"><strong>Departure Time</strong></td>
     <td class="text-center"><strong>Arrival Time</strong></td>
     <td class="text-center"><strong>Duration</strong></td>
     <td class="text-center"><strong>Price</strong></td>
     <td class="text-center"><strong>Travel Class</strong></td>
     <td class="text-center"><strong>Nonstop</strong></td>
     <td class="text-center"><strong>Carrier</strong></td>
     <td class="text-center"><strong>Flight Number</strong></td>
     <td class="text-center"><strong>Add to Cart</strong></td>
   </tr>
 </thead>
   <% @flights_list.sort_by {|flight| flight.price}.map do |flight| %>
   <tr>
     <td style="text-align:center"><input type="radio" name="choice" class="text-center"></td>
     <td class="text-center"><%= hidden_field_tag :'flight[origin]', flight.origin %><%= flight.origin %></td>
     <td class="text-center"><%= flight.destination %></td>
     <td class="text-center"><%= flight.departure_date.strftime("%b %d, %Y") %></td>
     <td class="text-center"><%= flight.departure_time.strftime("%I:%M %p") %></td>
     <td class="text-center"><%= flight.arrival_time.strftime("%I:%M %p") %></td>
     <% arr = flight.duration.split(/[A-z]/)
     flight.duration = "#{arr[2]} "+"hour".pluralize(arr[2].to_i) + ", #{arr[3]} " + "minutes".pluralize(arr[3].to_i) %>
     <td class="text-center"><%= flight.duration %></td>
     <td class="text-center">$<%= flight.price %></td>
     <td class="text-center"><%= flight.travel_class %></td>
     <td class="text-center"><%= flight.nonstop %></td>
     <td class="text-center"><%= flight.carrier %></td>
     <td class="text-center"><%= flight.flight_number %></td>
    <td class="text-center"> <%= button_to "Add", flight_path(flight)+'/add_to_cart', method: :post, data: {confirm: "Are you sure you want to add this flight to your cart?"}, class: "btn btn-outline-warning"%></td>

   </tr>
    <% if flight.connection_origin %>
    <tr>
      <td class="text-center">-</td>
      <td class="text-center"><%= flight.connection_origin %></td>
      <td class="text-center"><%= flight.connection_destination %></td>
      <td class="text-center"><%= flight.connection_departure_date.strftime("%b %d, %Y") %></td>
      <td class="text-center"><%= flight.connection_departure_time.strftime("%I:%M %p") %></td>
      <td class="text-center"><%= flight.connection_arrival_time.strftime("%I:%M %p") %></td>
      <% arr = flight.connection_duration.split(/[A-z]/)
      flight.connection_duration = "#{arr[2]} hours, #{arr[3]} minutes" %>
      <td class="text-center"><%= flight.connection_duration %></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
    </tr>
    <% end %>
   <% end %>
 </table>
</div>
<div><%= submit_tag 'Save', class: "btn btn-outline-success", style:"margin-left:10px" %></div>
<% end %>
